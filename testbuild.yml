---
version: 0.2
phases:
  pre_build:
    commands:
      # - echo "/${UPSTREAMSTACK}/${ENVIRONMENT}/${GOLDENAMIPIPELINE}"
      # - export GOLDEN_AMI_ID=$(aws ssm get-parameters --name "/${UPSTREAMSTACK}/${ENVIRONMENT}/${GOLDENAMIPIPELINE}" --query "Parameters[0].Value" --output text)
      # - echo "${GOLDEN_AMI_ID}"
      - ls -la
      - cd eac-core/
      - ls -la
      - cd packer/
      - ls -la
      - echo "Validating Packer template"
      - ./packer validate packer_test.json
  build:
    commands:
      # - echo "running build for packer"
      # - ./packer build -color=false -parallel=false -timestamp-ui packer_test.json | tee build.log
  post_build:
    commands:
      # - cat ami_builder_event.json
      - echo "test completed on `date`"