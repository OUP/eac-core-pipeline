# playbook-ami-test.yml
---

  - hosts: all
    any_errors_fatal: true

    tasks:
      - name: Verify Tomcat Config Exists
        become: true
        stat: 
          path: /etc/systemd/system/tomcat.service
      
      - name: Start Apache Tomcat
        become: true
        service:
          name: tomcat
          state: started
      
      - name: Start Flexera
        become: true
        service:
          name: mgsusageag
          state: started
      
      - name: Check Flexera Install
        command: ps aux | grep mgsusageag | grep -v grep
      
      - name: Check Java Version
        command: java -version
      
      - name: Check EAC App URL
        uri:
          url: http://localhost:8080/eacAdmin/login